(this["webpackJsonpclient-side"]=this["webpackJsonpclient-side"]||[]).push([[0],{129:function(e,t,a){e.exports=a(290)},134:function(e,t,a){},135:function(e,t,a){},154:function(e,t,a){},159:function(e,t,a){},185:function(e,t){},188:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),o=a.n(s);a(134),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(7),c=a(13),l=a(19),u=a(18),m=a(30),d=a(10);a(135);function p(){return r.a.createElement("div",{className:"footer"},"All rights reserved to Hewan Rada (C)")}var h,v=a(4),f=a(6),g=a.n(f),b=a(14),E=a(5),k=a(3),w=a.n(k),S=function e(t,a){Object(i.a)(this,e),this.userName=t,this.password=a},N=a(121);!function(e){e[e.updateIsUserLoggedIn=0]="updateIsUserLoggedIn"}(h||(h={}));var x=Object(N.a)((function(e,t){var a=Object(v.a)({},e);switch(t.type){case h.updateIsUserLoggedIn:a.isUserLoggedIn=!t.payload}return a}),new function e(){Object(i.a)(this,e),this.isUserLoggedIn=!1}),y=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"handleErrorsOnUi",value:function(e,t){return void 0===e.response?(console.log(e.message),this.showSnackbarWithErrorStatus(404,e.message,t),void this.hideSnackbarAndSendToPageNotFound(t)):401===e.response.status||601===e.response.status?(console.log(e.response.status+": "+e.response.data.error),void this.showRedNoteToUser(e.response.data.error,t)):600===e.response.status||500===e.response.status?(console.log(e.response.status+": "+e.response.data.error),this.showSnackbarWithErrorStatus(e.response.status,e.response.data.error,t),void this.hideSnackbarAndSendToPageNotFound(t)):410===e.response.status?(console.log(e.response.status+": "+e.response.data.error),this.showSnackbarWithErrorStatus(e.response.status,e.response.data.error,t),void this.hideSnackbar(t)):403===e.response.status?(console.log(e.response.status+": "+e.response.data.error),this.showSnackbarWithErrorStatus(e.response.status,e.response.data.error,t),this.hideSnackbar(t),void this.sendBackToHomePage(t)):(console.log(e.message),this.showSnackbarWithErrorStatus("Unknown",e.message,t),void this.hideSnackbar(t))}},{key:"showSnackbar",value:function(e,t){var a=Object(v.a)({},t.state);a.isShowSnackbar=!0,a.snackbarMessage=e,t.setState(a)}},{key:"showSnackbarWithErrorStatus",value:function(e,t,a){var n=Object(v.a)({},a.state);n.isShowSnackbar=!0,n.snackbarMessage=e+": "+t,a.setState(n)}},{key:"hideSnackbar",value:function(e){setTimeout((function(){var t=Object(v.a)({},e.state);t.isShowSnackbar=!1,e.setState(t)}),2200)}},{key:"sendBackToHomePage",value:function(e){setTimeout((function(){sessionStorage.clear(),x.dispatch({type:h.updateIsUserLoggedIn,payload:x.getState().isUserLoggedIn}),e.props.history.push("/home")}),2200)}},{key:"showRedNoteToUser",value:function(e,t){var a=Object(v.a)({},t.state);a.isShowNote=!0,a.noteToUser=e,t.setState(a)}},{key:"hideSnackbarAndSendToPageNotFound",value:function(e){setTimeout((function(){var t=Object(v.a)({},e.state);t.isShowSnackbar=!1,e.setState(t),e.props.history.push("/pageNotFound")}),2200)}}]),e}(),O=a(324),j=(a(154),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).btn=void 0,n.componentDidMount=Object(b.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),null==sessionStorage.getItem("token")){e.next=13;break}return e.prev=2,e.next=5,w.a.get(n.props.hostUrl+":3001/users/details");case 5:t=e.sent,"Admin"===(a=t.data).userType?n.props.history.push("/admin"):"Customer"===a.userType&&n.props.history.push("/customer"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),n.setUserName=function(e){var t=e.target.value;n.setState({userName:t})},n.setPassword=function(e){var t=e.target.value;n.setState({password:t})},n.onLoginBtnClicked=Object(b.a)(g.a.mark((function e(){var t,a,r,s,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.state.userName.trim()&&""!==n.state.password.trim()){e.next=6;break}return(t=Object(v.a)({},n.state)).isShowNote=!0,t.noteToUser="All fields must be filled!",n.setState(t),e.abrupt("return");case 6:return(a=n.btn.current).setAttribute("disabled","disabled"),e.prev=8,console.log("Entered login"),console.log(n.props.hostUrl),r=new S(n.state.userName,n.state.password),e.next=14,w.a.post(n.props.hostUrl+":3001/users/login",r);case 14:s=e.sent,o=s.data,w.a.defaults.headers.common.Authorization="Bearer "+o.token,x.dispatch({type:h.updateIsUserLoggedIn,payload:x.getState().isUserLoggedIn}),sessionStorage.setItem("token",""+o.token),sessionStorage.setItem("userName",n.state.userName),"Admin"===o.userType?(n.props.history.push("/admin"),sessionStorage.setItem("userType","Admin")):"Customer"===o.userType&&(n.props.history.push("/customer"),sessionStorage.setItem("userType","Customer")),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(8),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 26:return e.prev=26,a.removeAttribute("disabled"),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[8,23,26,29]])}))),n.btn=r.a.createRef(),n.state={userName:"",password:"",isShowSnackbar:!1,snackbarMessage:"",isShowNote:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"LOGIN"),r.a.createElement("input",{type:"text",placeholder:"User name",value:this.state.userName,onChange:this.setUserName}),r.a.createElement("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:this.setPassword}),r.a.createElement("button",{ref:this.btn,onClick:this.onLoginBtnClicked},"login"),r.a.createElement("p",null,"Not a member? ",r.a.createElement("span",null," ",r.a.createElement(m.b,{to:"/register",exact:!0},"Sign up now"))),this.state.isShowNote&&r.a.createElement("p",{className:"noteToUser"},this.state.noteToUser),r.a.createElement(O.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.isShowSnackbar,message:this.state.snackbarMessage}))}}]),a}(n.Component)),U=Object(d.g)(j),D=function e(t,a,n,r){Object(i.a)(this,e),this.firstName=t,this.lastName=a,this.userName=n,this.password=r},I=(a(159),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).btn=void 0,n.componentDidMount=Object(b.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=1,null==sessionStorage.getItem("token")){e.next=8;break}return e.next=5,w.a.get(n.props.hostUrl+":3001/users/details");case 5:t=e.sent,"Admin"===(a=t.data).userType?n.props.history.push("/admin"):"Customer"===a.userType&&n.props.history.push("/customer");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),n.setFirstName=function(e){var t=e.target.value;t.length>20&&(e.target.style.border="red 1px solid"),e.target.style.border="gray 1px solid",n.setState({firstName:t})},n.setLastName=function(e){var t=e.target.value;t.length>20&&(e.target.style.border="red 1px solid"),e.target.style.border="gray 1px solid",n.setState({lastName:t})},n.setUserName=function(e){var t=e.target.value;t.length>20&&(e.target.style.border="red 1px solid"),e.target.style.border="gray 1px solid",n.setState({userName:t})},n.setPassword=function(e){var t=e.target.value;t.length>20&&(e.target.style.border="red 1px solid"),e.target.style.border="gray 1px solid",n.setState({password:t})},n.isFormFeildsValid=function(){if(""===n.state.firstName.trim()||""===n.state.lastName.trim()||""===n.state.userName.trim()||""===n.state.password.trim()){var e=Object(v.a)({},n.state);return e.isShowNote=!0,e.noteToUser="All fields must be filled!",n.setState(e),!1}if(n.state.firstName.length>20||n.state.lastName.length>20||n.state.userName.length>20||n.state.password.length>20){var t=Object(v.a)({},n.state);return t.isShowNote=!0,t.noteToUser="Fields can include max 20 characters",n.setState(t),!1}if(n.state.password.length<6){var a=Object(v.a)({},n.state);return a.isShowNote=!0,a.noteToUser="Password must include at least 6 characters",n.setState(a),!1}return n.setState({isShowNote:!1}),!0},n.onSignupBtnClicked=Object(b.a)(g.a.mark((function e(){var t,a,r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isFormFeildsValid()){e.next=2;break}return e.abrupt("return");case 2:return(t=n.btn.current).setAttribute("disabled","disabled"),e.prev=4,console.log("Entered register"),a=new D(n.state.firstName,n.state.lastName,n.state.userName,n.state.password),e.next=9,w.a.post(n.props.hostUrl+":3001/users/register",a);case 9:r=e.sent,s=r.data,w.a.defaults.headers.common.Authorization="Bearer "+s.token,x.dispatch({type:h.updateIsUserLoggedIn,payload:x.getState().isUserLoggedIn}),sessionStorage.setItem("token",""+s.token),sessionStorage.setItem("userName",n.state.userName),"Admin"===s.userType?(n.props.history.push("/admin"),sessionStorage.setItem("userType","Admin")):"Customer"===s.userType&&(n.props.history.push("/customer"),sessionStorage.setItem("userType","Customer")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 21:return e.prev=21,t.removeAttribute("disabled"),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[4,18,21,24]])}))),n.btn=r.a.createRef(),n.state={firstName:"",lastName:"",userName:"",password:"",isShowSnackbar:!1,snackbarMessage:"",isShowNote:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"register"},r.a.createElement("h1",null,"SIGN UP"),r.a.createElement("input",{type:"text",placeholder:"First Name",value:this.state.firstName,onChange:this.setFirstName}),r.a.createElement("input",{type:"text",placeholder:"Last Name",value:this.state.lastName,onChange:this.setLastName}),r.a.createElement("input",{type:"text",placeholder:"User Name",value:this.state.userName,onChange:this.setUserName}),r.a.createElement("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:this.setPassword}),r.a.createElement("button",{ref:this.btn,onClick:this.onSignupBtnClicked},"Sign Up"),this.state.isShowNote&&r.a.createElement("p",{className:"noteToUser"},this.state.noteToUser),r.a.createElement(O.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.isShowSnackbar,message:this.state.snackbarMessage}))}}]),a}(n.Component)),C=Object(d.g)(I),F=a(37),M=a.n(F),A=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"getVacationIndex",value:function(e,t){return e.vacations.map((function(e){return e.vacationId})).indexOf(t.vacationId)}}]),e}(),L=(a(188),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).socket=void 0,n.checkbox=void 0,n.componentWillUnmount=function(){null!=n.socket&&n.socket.disconnect()},n.registerSocketListeners=function(){n.socket.on("add-vacation",(function(e){var t=Object(v.a)({},n.state);t.vacations.push(e),n.setState(t)})),n.socket.on("delete-vacation",(function(e){var t=Object(v.a)({},n.state),a=A.getVacationIndex(t,e);t.vacations.splice(a,1),n.setState(t)})),n.socket.on("edit-vacation",(function(e){var t=Object(v.a)({},n.state),a=A.getVacationIndex(t,e);t.vacations[a]=e,n.setState(t)})),n.socket.on("follow-vacation",(function(e){var t=Object(v.a)({},n.state),a=A.getVacationIndex(t,e);t.vacations[a].numOfFollowers=t.vacations[a].numOfFollowers+1,n.setState(t)})),n.socket.on("unfollow-vacation",(function(e){var t=Object(v.a)({},n.state),a=A.getVacationIndex(t,e);t.vacations[a].numOfFollowers=t.vacations[a].numOfFollowers-1,n.setState(t)}))},n.onFollowClicked=function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=n.checkbox.current).setAttribute("disabled","disabled"),t.isFollowed=!t.isFollowed,w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=4,!0!==t.isFollowed){e.next=12;break}return e.next=8,w.a.post(n.props.hostUrl+":3001/vacations/follow/"+t.vacationId);case 8:t.numOfFollowers=t.numOfFollowers+1,n.socket.emit("follow-vacation",t),e.next=16;break;case 12:return e.next=14,w.a.delete(n.props.hostUrl+":3001/vacations/unfollow/"+t.vacationId);case 14:t.numOfFollowers=t.numOfFollowers-1,n.socket.emit("unfollow-vacation",t);case 16:n.setState({vacations:n.state.vacations}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 22:return e.prev=22,a.removeAttribute("disabled"),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}(),n.order=function(e,t){return e.isFollowed>t.isFollowed?-1:e.isFollowed<t.isFollowed?1:0},n.checkbox=r.a.createRef(),n.state={vacations:[],isShowSnackbar:!1,snackbarMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=1,null==sessionStorage.getItem("token")){e.next=13;break}return e.next=5,w.a.get(this.props.hostUrl+":3001/users/details");case 5:if(t=e.sent,a=t.data,this.socket=M()(this.props.hostUrl+":3002",{query:"token="+sessionStorage.getItem("token")}),"Customer"===a.userType){e.next=11;break}return this.props.history.push("/admin"),e.abrupt("return");case 11:e.next=15;break;case 13:return this.props.history.push("/home"),e.abrupt("return");case 15:return this.registerSocketListeners(),e.next=18,w.a.get(this.props.hostUrl+":3001/vacations");case 18:n=e.sent,this.setState({vacations:n.data}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),y.handleErrorsOnUi(e.t0,this);case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"customer"},r.a.createElement("div",{className:"cardContainer"},this.state.vacations.sort((function(t,a){return e.order(t,a)})).map((function(t){return r.a.createElement("div",{className:"card bg-purple text-white cardBody",key:t.vacationId},r.a.createElement("h5",{className:"card-header"},t.destination),r.a.createElement("img",{className:"card-img-top image",src:t.image,alt:t.destination}),r.a.createElement("input",{type:"checkbox",className:"checkbox",ref:e.checkbox,id:t.vacationId,checked:t.isFollowed,onChange:function(){return e.onFollowClicked(t)}}),r.a.createElement("label",{htmlFor:t.vacationId},r.a.createElement("svg",{id:"heart-svg",viewBox:"467 392 58 57",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"Group",fill:"none",fillRule:"evenodd",transform:"translate(467 392)"},r.a.createElement("path",{d:"M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z",id:"heart",fill:"#AAB8C2"}),r.a.createElement("circle",{id:"main-circ",fill:"#E2264D",opacity:"0",cx:"29.5",cy:"29.5",r:"1.5"}),r.a.createElement("g",{id:"grp7",opacity:"0",transform:"translate(7 6)"},r.a.createElement("circle",{id:"oval1",fill:"#9CD8C3",cx:"2",cy:"6",r:"2"}),r.a.createElement("circle",{id:"oval2",fill:"#8CE8C3",cx:"5",cy:"2",r:"2"})),r.a.createElement("g",{id:"grp6",opacity:"0",transform:"translate(0 28)"},r.a.createElement("circle",{id:"oval1",fill:"#CC8EF5",cx:"2",cy:"7",r:"2"}),r.a.createElement("circle",{id:"oval2",fill:"#91D2FA",cx:"3",cy:"2",r:"2"})),r.a.createElement("g",{id:"grp3",opacity:"0",transform:"translate(52 28)"},r.a.createElement("circle",{id:"oval2",fill:"#9CD8C3",cx:"2",cy:"7",r:"2"}),r.a.createElement("circle",{id:"oval1",fill:"#8CE8C3",cx:"4",cy:"2",r:"2"})),r.a.createElement("g",{id:"grp2",opacity:"0",transform:"translate(44 6)",fill:"#CC8EF5"},r.a.createElement("circle",{id:"oval2",transform:"matrix(-1 0 0 1 10 0)",cx:"5",cy:"6",r:"2"}),r.a.createElement("circle",{id:"oval1",transform:"matrix(-1 0 0 1 4 0)",cx:"2",cy:"2",r:"2"})),r.a.createElement("g",{id:"grp5",opacity:"0",transform:"translate(14 50)",fill:"#91D2FA"},r.a.createElement("circle",{id:"oval1",transform:"matrix(-1 0 0 1 12 0)",cx:"6",cy:"5",r:"2"}),r.a.createElement("circle",{id:"oval2",transform:"matrix(-1 0 0 1 4 0)",cx:"2",cy:"2",r:"2"})),r.a.createElement("g",{id:"grp4",opacity:"0",transform:"translate(35 50)",fill:"#F48EA7"},r.a.createElement("circle",{id:"oval1",transform:"matrix(-1 0 0 1 12 0)",cx:"6",cy:"5",r:"2"}),r.a.createElement("circle",{id:"oval2",transform:"matrix(-1 0 0 1 4 0)",cx:"2",cy:"2",r:"2"})),r.a.createElement("g",{id:"grp1",opacity:"0",transform:"translate(24)",fill:"#9FC7FA"},r.a.createElement("circle",{id:"oval1",cx:"2.5",cy:"3",r:"2"}),r.a.createElement("circle",{id:"oval2",cx:"7.5",cy:"2",r:"2"}))))),r.a.createElement("div",{className:"vacationBody"},r.a.createElement("p",{className:"card-text description"},t.description),r.a.createElement("p",{className:"card-text"},t.startDate," - ",t.endDate)),r.a.createElement("div",{className:"vacationFooter card-footer"},r.a.createElement("p",null,t.price,"$"),r.a.createElement("i",{className:"far fa-grin-hearts fa-1x"}),r.a.createElement("span",{className:"faIcon"},t.numOfFollowers)))}))),r.a.createElement(O.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.isShowSnackbar,message:this.state.snackbarMessage}))}}]),a}(n.Component)),T=a(322),B=a(321),V=a(317),P=a(325),Y=a(320),z=a(318),R=a(323),W=a(123),H=a.n(W),G=a(319),q=Object(V.a)((function(e){return Object(P.a)({root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}})}));function $(e){var t=e.children,a=q(),n=Object(z.a)({disableHysteresis:!0,threshold:100});return r.a.createElement(G.a,{in:n},r.a.createElement("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:a.root},t))}function J(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement(B.a,{id:"back-to-top-anchor"}),r.a.createElement($,e,r.a.createElement(R.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},r.a.createElement(H.a,null))))}a(191);var K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).unsubscribeStore=void 0,n.btn=void 0,n.componentDidMount=function(){w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),n.unsubscribeStore=x.subscribe((function(){return n.setState({isUserLoggedIn:x.getState().isUserLoggedIn})})),null!=sessionStorage.getItem("token")&&x.dispatch({type:h.updateIsUserLoggedIn,payload:x.getState().isUserLoggedIn})},n.componentWillUnmount=function(){n.unsubscribeStore()},n.onLogOutClicked=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=1,e.next=4,w.a.post(n.props.hostUrl+":3001/users/logout");case 4:n.btn.current.setAttribute("disabled","disabled"),y.showSnackbar("Logging-out...",Object(E.a)(n)),y.sendBackToHomePage(Object(E.a)(n)),y.hideSnackbar(Object(E.a)(n)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),n.btn=r.a.createRef(),n.state={isUserLoggedIn:x.getState().isUserLoggedIn,isShowSnackbar:!1,snackbarMessage:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"navBar"},r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(B.a,null,r.a.createElement("h3",{className:"title",onClick:function(){return e.props.history.push("/home")}},"Magic Travels"),r.a.createElement("div",{className:"helloContainer"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",null,this.state.isUserLoggedIn&&r.a.createElement("div",{className:"hello"},r.a.createElement("span",null,"Hello ",sessionStorage.getItem("userName")),r.a.createElement("button",{ref:this.btn,onClick:this.onLogOutClicked},"Log Out"))))))),r.a.createElement(J,this.props)),r.a.createElement(O.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.isShowSnackbar,message:this.state.snackbarMessage}))}}]),a}(n.Component),Z=Object(d.g)(K),Q=function e(t,a,n,r,s,o,c,l,u){Object(i.a)(this,e),this.vacationId=t,this.image=a,this.destination=n,this.price=r,this.description=s,this.startDate=o,this.endDate=c,this.numOfFollowers=l,this.isFollowed=u},X=a(34),_=a.n(X),ee=(a(192),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).vacation=new Q("","","",0,"","",""),n.socket=void 0,n.btn=void 0,n.fileToDelete=void 0,n.componentDidMount=Object(b.a)(g.a.mark((function e(){var t,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=1,null==sessionStorage.getItem("token")){e.next=13;break}return e.next=5,w.a.get(n.props.hostUrl+":3001/users/details");case 5:if(t=e.sent,a=t.data,n.socket=M()(n.props.hostUrl+":3002",{query:"token="+sessionStorage.getItem("token")}),"Admin"===a.userType){e.next=11;break}return n.props.history.push("/customer"),e.abrupt("return");case 11:e.next=15;break;case 13:return n.props.history.push("/home"),e.abrupt("return");case 15:return n.registerSocketListeners(),e.next=18,w.a.get(n.props.hostUrl+":3001/vacations");case 18:r=e.sent,n.setState({vacations:r.data}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 25:case"end":return e.stop()}}),e,null,[[1,22]])}))),n.componentWillUnmount=function(){null!=n.socket&&n.socket.disconnect()},n.registerSocketListeners=function(){n.socket.on("follow-vacation",(function(e){var t=Object(v.a)({},n.state),a=A.getVacationIndex(t,e);t.vacations[a].numOfFollowers=t.vacations[a].numOfFollowers+1,n.setState(t)})),n.socket.on("unfollow-vacation",(function(e){var t=Object(v.a)({},n.state),a=A.getVacationIndex(t,e);t.vacations[a].numOfFollowers=t.vacations[a].numOfFollowers-1,n.setState(t)}))},n.onHandleModalButtonsDisplay=function(e,t){var a=Object(v.a)({},n.state);a.isShowModal=!a.isShowModal,!0===e?(a.isShowUpdateButton=e,a.minDate=_()(new Date).format("YYYY-MM-DD"),a.fileInputLabel=t.image.slice(n.props.hostUrl+":3001/".length,t.image.length),a.imageForPreview=t.image,n.fileToDelete=t.image):(a.minDate=_()(new Date).format("YYYY-MM-DD"),a.imageForPreview=n.props.hostUrl+":3001/no-image.jpg",a.fileInputLabel="Choose file"),n.setState(a),n.vacation=new Q("",n.props.hostUrl+":3001/no-image.jpg","",0,"","","")},n.setDestination=function(e){var t=e.target.value;n.vacation.destination=t},n.setDescription=function(e){var t=e.target.value;n.vacation.description=t},n.setImage=function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){var a=Object(v.a)({},n.state);a.imageForPreview=e.target.result,a.fileInputLabel=t.name,n.setState(a)},a.readAsDataURL(t),n.vacation.image=t},n.setStartDate=function(e){var t=e.target.value,a=_()(t).format("YYYY-MM-DD");n.setState({minDate:a}),n.vacation.startDate=t},n.setEndDate=function(e){var t=e.target.value;n.vacation.endDate=t},n.setPrice=function(e){var t=+e.target.value;n.vacation.price=t},n.onCreateVacationClicked=Object(b.a)(g.a.mark((function e(){var t,a,r,s,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isFormFieldsValid()){e.next=2;break}return e.abrupt("return");case 2:return(t=n.btn.current).setAttribute("disabled","disabled"),(a=new FormData).append("file",n.vacation.image),w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=7,e.next=10,w.a.post(n.props.hostUrl+":3001/vacations/upload",a,{});case 10:return r=e.sent,n.vacation.image=r.data.filename,s=n.vacation,e.next=15,w.a.post(n.props.hostUrl+":3001/vacations/add",s);case 15:o=e.sent,n.fixDateFormat(o.data.startDate),n.fixDateFormat(o.data.endDate),n.socket.emit("add-vacation",o.data),(i=Object(v.a)({},n.state)).isShowModal=!i.isShowModal,i.vacations.push(o.data),i.fileInputLabel="Choose file",n.setState(i),n.vacation=new Q("",n.props.hostUrl+":3001/no-image.jpg","",0,"","",""),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(7),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 30:return e.prev=30,t.removeAttribute("disabled"),e.finish(30);case 33:case 34:case"end":return e.stop()}}),e,null,[[7,27,30,33]])}))),n.isFormFieldsValid=function(){if(""===n.vacation.destination.trim()||""===n.vacation.description.trim()||""===n.vacation.image||n.vacation.image===n.props.hostUrl+":3001/no-image.jpg"||""===n.vacation.startDate.trim()||""===n.vacation.endDate.trim()||0===n.vacation.price)return y.showSnackbar("All fields must be filled correctly!",Object(E.a)(n)),y.hideSnackbar(Object(E.a)(n)),!1;if(Date.parse(n.vacation.endDate)<=Date.parse(n.vacation.startDate))return y.showSnackbar("End date is earlier than Start date!",Object(E.a)(n)),y.hideSnackbar(Object(E.a)(n)),!1;if(n.vacation.destination.length<2||n.vacation.description.length<10){return y.showSnackbar("some of the text fields you entered are too short!",Object(E.a)(n)),y.hideSnackbar(Object(E.a)(n)),!1}if(n.vacation.destination.length>45||n.vacation.description.length>1e3){return y.showSnackbar("some of the text fields you entered are too long!",Object(E.a)(n)),y.hideSnackbar(Object(E.a)(n)),!1}return!0},n.onUpdateVacationClicked=Object(b.a)(g.a.mark((function e(){var t,a,r,s,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isFormFieldsValid()){e.next=2;break}return e.abrupt("return");case 2:if((t=n.btn.current).setAttribute("disabled","disabled"),(a=new FormData).append("fileToDelete",n.fileToDelete),a.append("file",n.vacation.image),w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=8,n.vacation.image===n.fileToDelete){e.next=14;break}return e.next=12,w.a.post(n.props.hostUrl+":3001/vacations/upload",a,{});case 12:r=e.sent,n.vacation.image=r.data.filename;case 14:return e.next=16,w.a.put(n.props.hostUrl+":3001/vacations/update",n.vacation);case 16:n.fixDateFormat(n.vacation.startDate),n.fixDateFormat(n.vacation.endDate),n.socket.emit("edit-vacation",n.vacation),(s=Object(v.a)({},n.state)).isShowModal=!s.isShowModal,o=A.getVacationIndex(s,n.vacation),s.vacations[o]=n.vacation,n.setState(s),n.vacation=new Q("",n.props.hostUrl+":3001/no-image.jpg","",0,"","",""),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(8),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 30:return e.prev=30,t.removeAttribute("disabled"),e.finish(30);case 33:case 34:case"end":return e.stop()}}),e,null,[[8,27,30,33]])}))),n.onShowEditModalClicked=function(e){n.onHandleModalButtonsDisplay(!0,e);var t=e.startDate.split("/").reverse().join("-"),a=e.endDate.split("/").reverse().join("-");n.vacation=new Q(e.vacationId,e.image,e.destination,e.price,e.description,t,a,e.numOfFollowers)},n.onDeleteVactionClicked=function(){var e=Object(b.a)(g.a.mark((function e(t){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=1,e.next=4,w.a.delete(n.props.hostUrl+":3001/vacations/delete/"+t.vacationId);case 4:n.socket.emit("delete-vacation",t),a=Object(v.a)({},n.state),r=A.getVacationIndex(a,t),a.vacations.splice(r,1),n.setState(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),n.btn=r.a.createRef(),n.state={vacations:[],isShowModal:!1,isShowUpdateButton:!1,minDate:_()(new Date).format("YYYY-MM-DD"),isShowSnackbar:!1,snackbarMessage:"",fileInputLabel:"Choose file",imageForPreview:n.props.hostUrl+":3001/no-image.jpg"},n}return Object(c.a)(a,[{key:"fixDateFormat",value:function(e){e=_()(e,"YYYY-MM-DD").format("DD/MM/YYYY")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"admin"},this.state.isShowModal&&r.a.createElement("div",{className:"popUp"},r.a.createElement("div",{className:"modalContainer"},r.a.createElement("div",{className:"imageForPreview"},r.a.createElement("img",{src:this.state.imageForPreview,alt:this.vacation.destination,className:"rounded-circle"})),r.a.createElement("div",{className:"formContainer"},r.a.createElement("i",{className:"fas fa-times fa-2x closePopUp",onClick:function(){return e.onHandleModalButtonsDisplay(!1)}}),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"custom-file fileInput"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01",accept:"image/*",onChange:this.setImage,style:{display:"none"}}),r.a.createElement("label",{htmlFor:"inputGroupFile01"},r.a.createElement("i",{className:"fas fa-upload fa-2x nonDecoration"}),this.state.fileInputLabel)),!this.state.isShowUpdateButton&&r.a.createElement("h2",null,"Add a new vacation"),this.state.isShowUpdateButton&&r.a.createElement("h2",null,"Update a vacation"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Destination",defaultValue:this.vacation.destination,onChange:this.setDestination}),r.a.createElement("textarea",{rows:5,className:"form-control",placeholder:"Description...",defaultValue:this.vacation.description,onChange:this.setDescription}),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"dates"},r.a.createElement("label",null,"Start date: "),r.a.createElement("input",{type:"date",className:"form-control date",min:this.state.minDate,max:"2100-01-01",defaultValue:this.vacation.startDate,onChange:this.setStartDate,onKeyDown:function(e){return e.preventDefault()}})),r.a.createElement("label",{className:"separator",style:{marginLeft:"10px",marginRight:"10px"}},"- "),r.a.createElement("div",{className:"dates"},r.a.createElement("label",null,"End date: "),r.a.createElement("input",{type:"date",className:"form-control date",min:this.state.minDate,max:"2100-01-01",defaultValue:this.vacation.endDate,onChange:this.setEndDate,onKeyDown:function(e){return e.preventDefault()}}))),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"number",min:"0",className:"form-control",id:"price",placeholder:"Price",defaultValue:this.vacation.price,onChange:this.setPrice}),r.a.createElement("label",{className:"price",htmlFor:"price"},"$")),!this.state.isShowUpdateButton&&r.a.createElement("div",null,r.a.createElement("button",{ref:this.btn,onClick:function(){return e.onCreateVacationClicked()}},"Create")),this.state.isShowUpdateButton&&r.a.createElement("div",null,r.a.createElement("button",{ref:this.btn,onClick:function(){return e.onUpdateVacationClicked()}},"Update")))))),r.a.createElement("div",{className:"administration"},r.a.createElement("i",{className:"fas fa-plus fa-2x",onClick:function(){return e.onHandleModalButtonsDisplay(!1)}},r.a.createElement("span",{className:"nonDecoration"},"Add vacation")),r.a.createElement("i",{className:"fas fa-chart-bar fa-2x faIcon"},r.a.createElement("span",null,r.a.createElement(m.b,{className:"nonDecoration",to:"/reports",exact:!0},"Reports")))),r.a.createElement("div",{className:"cardContainer"},this.state.vacations.map((function(t){return r.a.createElement("div",{className:"card bg-purple text-white cardBody",key:t.vacationId},r.a.createElement("h5",{className:"card-header"},t.destination),r.a.createElement("img",{className:"card-img-top image",src:t.image,alt:t.destination}),r.a.createElement("div",{className:"iconsBar"},r.a.createElement("i",{className:"fas fa-pencil-alt fa-2x nonDecoration",onClick:function(){return e.onShowEditModalClicked(t)}}),r.a.createElement("i",{className:"fas fa-trash-alt fa-2x faIcon nonDecoration",onClick:function(){return e.onDeleteVactionClicked(t)}})),r.a.createElement("div",{className:"vacationBody"},r.a.createElement("p",{className:"card-text description"},t.description),r.a.createElement("p",{className:"card-text"},t.startDate," - ",t.endDate)),r.a.createElement("div",{className:"vacationFooter card-footer"},r.a.createElement("p",null,t.price,"$"),r.a.createElement("i",{className:"far fa-grin-hearts fa-1x"}),r.a.createElement("span",{className:"faIcon"},t.numOfFollowers)))}))),r.a.createElement(O.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.isShowSnackbar,message:this.state.snackbarMessage}))}}]),a}(n.Component)),te=Object(d.g)(ee),ae=a(124),ne=(a(286),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).socket=void 0,n.componentDidMount=Object(b.a)(g.a.mark((function e(){var t,a,r,s,o,i,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token"),e.prev=1,null==sessionStorage.getItem("token")){e.next=13;break}return e.next=5,w.a.get(n.props.hostUrl+":3001/users/details");case 5:if(t=e.sent,a=t.data,n.socket=M()(n.props.hostUrl+":3002",{query:"token="+sessionStorage.getItem("token")}),"Admin"===a.userType){e.next=11;break}return n.props.history.push("/customer"),e.abrupt("return");case 11:e.next=15;break;case 13:return n.props.history.push("/home"),e.abrupt("return");case 15:return n.registerSocketListeners(),e.next=18,w.a.get(n.props.hostUrl+":3001/vacations/reports");case 18:for(r=e.sent,s=[],o=[],i=0;i<r.data.length;i++)s.push(r.data[i].destination),o.push(r.data[i].numOfFollowers);(c=Object(v.a)({},n.state)).labels=s,c.data=o,n.setState(c),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(1),y.handleErrorsOnUi(e.t0,Object(E.a)(n));case 31:case"end":return e.stop()}}),e,null,[[1,28]])}))),n.componentWillUnmount=function(){null!=n.socket&&n.socket.disconnect()},n.randomColors=function(){for(var e=[],t=0;t<n.state.labels.length;t++){var a=Math.floor(256*Math.random()),r=Math.floor(256*Math.random()),s=Math.floor(256*Math.random());e.push("rgba("+a+","+r+","+s+",0.2)")}return e},n.registerSocketListeners=function(){n.socket.on("follow-vacation",(function(e){var t=Object(v.a)({},n.state);if(t.labels.includes(e.destination)){var a=t.labels.indexOf(e.destination);t.data[a]=t.data[a]+1}else t.labels.push(e.destination),t.data.push(1);n.setState(t)})),n.socket.on("unfollow-vacation",(function(e){var t=Object(v.a)({},n.state),a=t.labels.indexOf(e.destination);1===t.data[a]?(t.data.splice(a,1),t.labels.splice(a,1)):t.data[a]>1&&(t.data[a]=t.data[a]-1),n.setState(t)}))},n.state={labels:[],data:[],isShowSnackbar:!1,snackbarMessage:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"reports"},r.a.createElement("h1",null,"REPORTS"),r.a.createElement(ae.Bar,{redraw:!0,data:{labels:this.state.labels,datasets:[{backgroundColor:this.randomColors(),borderColor:this.randomColors(),borderWidth:2,data:this.state.data}]},options:{maintainAspectRatio:!1,responsive:!0,title:{display:!1},legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,min:0,stepSize:1}}]}},width:200,height:180}),r.a.createElement(O.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.isShowSnackbar,message:this.state.snackbarMessage}))}}]),a}(n.Component)),re=Object(d.g)(ne);a(287);function se(){return r.a.createElement("div",{className:"pageNotFound"},r.a.createElement("div",{className:"text"},r.a.createElement("p",null,"404")),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"caveman"},r.a.createElement("div",{className:"leg"},r.a.createElement("div",{className:"foot"},r.a.createElement("div",{className:"fingers"}))),r.a.createElement("div",{className:"leg"},r.a.createElement("div",{className:"foot"},r.a.createElement("div",{className:"fingers"}))),r.a.createElement("div",{className:"shape"},r.a.createElement("div",{className:"circle"}),r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"head"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"nose"})),r.a.createElement("div",{className:"mouth"})),r.a.createElement("div",{className:"arm-right"},r.a.createElement("div",{className:"club"}))),r.a.createElement("div",{className:"caveman"},r.a.createElement("div",{className:"leg"},r.a.createElement("div",{className:"foot"},r.a.createElement("div",{className:"fingers"}))),r.a.createElement("div",{className:"leg"},r.a.createElement("div",{className:"foot"},r.a.createElement("div",{className:"fingers"}))),r.a.createElement("div",{className:"shape"},r.a.createElement("div",{className:"circle"}),r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"head"},r.a.createElement("div",{className:"eye"},r.a.createElement("div",{className:"nose"})),r.a.createElement("div",{className:"mouth"})),r.a.createElement("div",{className:"arm-right"},r.a.createElement("div",{className:"club"})))),r.a.createElement("a",{href:"https://codepen.io/SofiaSergio/"},r.a.createElement("div",{id:"link"},r.a.createElement("i",{className:"fab fa-codepen"}),r.a.createElement("p",null,"404 copyrights"))))}a(288);function oe(){return r.a.createElement("div",{className:"header"},r.a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,id:"myVideo",width:"100%",height:"auto"},r.a.createElement("source",{src:"../../images/mainHeader.mp4",type:"video/mp4"})))}a(289);var ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).hostUrl="http://34.65.225.69",e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(m.a,null,r.a.createElement("section",{className:"layout"},r.a.createElement("nav",null,r.a.createElement(Z,{hostUrl:this.hostUrl})),r.a.createElement("header",null,r.a.createElement(oe,null)),r.a.createElement("main",null,r.a.createElement(d.d,null,r.a.createElement(d.a,{path:"/",to:"/home",exact:!0}),r.a.createElement(d.b,{path:"/home",component:function(){return r.a.createElement(U,{hostUrl:e.hostUrl})},exact:!0}),r.a.createElement(d.b,{path:"/register",component:function(){return r.a.createElement(C,{hostUrl:e.hostUrl})},exact:!0}),r.a.createElement(d.b,{path:"/customer",component:function(){return r.a.createElement(L,{hostUrl:e.hostUrl})},exact:!0}),r.a.createElement(d.b,{path:"/admin",component:function(){return r.a.createElement(te,{hostUrl:e.hostUrl})},exact:!0}),r.a.createElement(d.b,{path:"/reports",component:function(){return r.a.createElement(re,{hostUrl:e.hostUrl})},exact:!0}),r.a.createElement(d.b,{component:se}))),r.a.createElement("footer",null,r.a.createElement(p,null))))}}]),a}(n.Component);o.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.73601db8.chunk.js.map